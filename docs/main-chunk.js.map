{"version":3,"sources":["webpack:///./Model.js","webpack:///./utils/animations.js","webpack:///./components/Header.js","webpack:///./components/Footer.js","webpack:///./components/Body.js","webpack:///./components/Layout.js","webpack:///./App.js","webpack:///./utils/helpers.js","webpack:///./index.js"],"names":["m","__webpack_require__","d","__webpack_exports__","model","routes","urls","reduce","req","route","page","path","split","concat","url","getComments","id","state","prev","data","reqs","http","getData","showComment","comment","getPath","request","method","then","key","scrollPos","profile","tabsShowing","title","toggleComments","_ref","level","console","log","changePage","delta","showTabs","animateComponentEntrance","idx","dom","style","opacity","setTimeout","classList","toggle","animateHeaderEntrance","_ref2","animateChildrenLimitsEntrance","_ref4","animate","dir","_ref5","mithrilIcon","fill","Tab","attrs","oncreate","view","tab","href","link","Header","_ref3","tabs","Object","keys","navTabs","without","width","version","xmlns","xmlns:xlink","enable-background","map","active","Footer","Body","children","Layout","IsLoading","Post","_ref$attrs","showItem","_ref$attrs$post","post","comments_count","domain","points","time_ago","user","onclick","Comment","_ref2$attrs","_ref2$attrs$comment","comments","content","trust","c","Component","arguments","length","undefined","onscroll","e","setpoint","target","scrollTop","limit","infiniteScroll","isEmpty","isPost","_post","isComment","toRoute","onmatch","_","init","render","root","document","body","getProfile","w","winW","window","innerWidth","navigator","addEventListener","serviceWorker","register","registration","catch","registrationError","checkWidth","lastProfile","redraw","requestAnimationFrame","makeRoutes"],"mappings":"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","file":"main-chunk.js","sourcesContent":["\r\nconst routes = ['news', 'newest', 'ask', 'show', 'jobs', 'item/:key', 'user:/key']\r\n\r\nconst url = route => page => {\r\n  let path = route.split('/')[0]\r\n  return `https://api.hnpwa.com/v0/${path}/${page}.json`\r\n}\r\n\r\nconst urls = routes.reduce((req, route) => {\r\n  req[route] = url(route)\r\n  return req\r\n}, {})\r\n\r\nconst http = model => url => route => m\r\n  .request({\r\n    url,\r\n    method: 'GET',\r\n  })\r\n  .then(data => {\r\n    model.data[route].data = data\r\n    return model\r\n  })\r\n\r\nconst reqs = {\r\n  urls,\r\n  http,\r\n}\r\n\r\nconst getData = model => route => {\r\n  model.state.showComment = false\r\n  model.state.comment = {}\r\n  model.state.route = route\r\n  let path = model.getPath(route)\r\n  model.data[route] ? model.data[route] : (model.data[route] = { data: [] })\r\n  model.reqs.http(model)(model.reqs.urls[path](model.state.page))(route)\r\n}\r\n\r\nconst getComments = model => route => id => {\r\n  model.state.prev = model.state.route\r\n  model.state.route = route\r\n  model.data[route] ? model.data[route] : (model.data[route] = { data: [] })\r\n  model.reqs.http(model)(model.reqs.urls['item/:key'](id))(route)\r\n}\r\n\r\nconst getPath = route => route.split('/')[1]\r\n\r\nconst state = {\r\n  key: '',\r\n  url: '',\r\n  route: '',\r\n  scrollPos: 1,\r\n  page: 1,\r\n  profile: '',\r\n  tabsShowing: false,\r\n  title: '',\r\n  comment: {},\r\n}\r\n\r\n\r\nconst toggleComments = ({model, key, level}) => {\r\n  model.state.comment[`${key}-${level}`] ?\r\n    model.state.comment[`${key}-${level}`] = !model.state.comment[`${key}-${level}`] : model.state.comment[`${key}-${level}`] = true\r\n  console.log(model.state)\r\n}\r\n\r\nexport const model = {\r\n  getComments,\r\n  getData,\r\n  routes,\r\n  getPath,\r\n  reqs,\r\n  data: {},\r\n  state,\r\n  toggleComments,\r\n  changePage: delta => model => {\r\n    model.state.page = model.state.page + delta\r\n    model.getData(model)(model.state.route)\r\n  },\r\n  showTabs: model =>\r\n    model.state.tabsShowing = !model.state.tabsShowing,\r\n}\r\n","export const animateComponentEntrance = idx => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  return setTimeout(() => {\r\n    dom.classList.toggle('stretchRight')\r\n    dom.style.opacity = 1\r\n  }, idx * 100 + 20)\r\n}\r\n\r\nexport const animateHeaderEntrance = ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  dom.classList.toggle('slideRight')\r\n  dom.style.opacity = 1\r\n}\r\n\r\nexport const animateChildrenEntrance = ({ dom }) => {\r\n  let children = [ ...dom.children ]\r\n\r\n  return children.map((child, idx) => {\r\n    child.style.opacity = 0\r\n    setTimeout(() => {\r\n      child.classList.toggle('slideRight')\r\n      child.style.opacity = 1\r\n    }, (idx + 1) * 10)\r\n  })\r\n}\r\n\r\nexport const animateChildrenLimitsEntrance = idx => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle('slideDown')\r\n    dom.style.opacity = 1\r\n  }, (idx + 1) * 200)\r\n}\r\n\r\nexport const animate = dir => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle(dir)\r\n    dom.style.opacity = 1\r\n  },  200)\r\n}\r\n\r\nexport const slideModalOut = ({ dom }) => {\r\n  return new Promise(() => {\r\n    dom.classList.remove('slideRight')\r\n    return setTimeout(()=> {\r\n      dom.classList.add('reverseAnimation', 'slideRight')\r\n    } , 200)\r\n  })\r\n}\r\n\r\n\r\nexport const animateChildrenLimitsExit = ({ dom }) =>\r\n  new Promise(() => {\r\n    [ ...dom.children ].reverse().map((child, idx) => {\r\n      return setTimeout(() => {\r\n        child.style.display = 'none'\r\n      }, idx * 100)\r\n    })\r\n  })\r\n\r\n","import m from 'mithril'\r\nimport { animateHeaderEntrance } from '../utils/animations.js'\r\nimport { without } from 'ramda'\r\n\r\nconst mithrilIcon = m('path', { 'd': 'M31.716,13.5C31.699,6.47,25.974,0.755,18.94,0.755c-7.045,0-12.777,5.732-12.777,12.777\\n\\t\\t\\tc0,0.022,0.004,0.043,0.004,0.065C2.477,15.84,0,19.887,0,24.511c0,7.046,5.731,12.777,12.777,12.777\\n\\t\\t\\tc2.268,0,4.395-0.601,6.244-1.642c1.849,1.041,3.977,1.642,6.245,1.642c7.046,0,12.777-5.732,12.777-12.777\\n\\t\\t\\tC38.043,19.82,35.495,15.722,31.716,13.5z M19.021,32.961c-2.312-1.713-3.906-4.341-4.22-7.352c1.3,0.448,2.689,0.702,4.139,0.702\\n\\t\\t\\tc1.514,0,2.96-0.278,4.307-0.764C22.949,28.584,21.349,31.236,19.021,32.961z M8.517,14.898c1.303-0.579,2.743-0.909,4.26-0.909\\n\\t\\t\\tc1.475,0,2.879,0.307,4.154,0.858c-2.114,1.826-3.629,4.325-4.195,7.167C10.473,20.352,8.898,17.814,8.517,14.898z M18.94,24.055\\n\\t\\t\\tc-1.457,0-2.846-0.298-4.109-0.837c0.361-2.928,1.929-5.482,4.19-7.157c2.243,1.662,3.802,4.187,4.18,7.085\\n\\t\\t\\tC21.897,23.727,20.457,24.055,18.94,24.055z M21.111,14.846c1.275-0.55,2.679-0.858,4.154-0.858c1.457,0,2.846,0.298,4.11,0.837\\n\\t\\t\\tc-0.356,2.885-1.883,5.404-4.089,7.082C24.704,19.108,23.199,16.65,21.111,14.846z M18.94,3.01c5.432,0,9.915,4.137,10.466,9.425\\n\\t\\t\\tc-1.3-0.447-2.689-0.702-4.14-0.702c-2.268,0-4.396,0.601-6.245,1.642c-1.848-1.041-3.975-1.642-6.244-1.642\\n\\t\\t\\tc-1.514,0-2.96,0.278-4.307,0.763C8.993,7.179,13.488,3.01,18.94,3.01z M12.777,35.034c-5.803,0-10.523-4.72-10.523-10.523\\n\\t\\t\\tc0-3.418,1.645-6.451,4.177-8.375c0.744,3.581,2.999,6.607,6.059,8.408c0.011,3.847,1.735,7.293,4.442,9.631\\n\\t\\t\\tC15.656,34.727,14.253,35.034,12.777,35.034z M25.266,35.034c-1.475,0-2.879-0.307-4.154-0.858\\n\\t\\t\\tc2.715-2.345,4.444-5.804,4.444-9.664c0-0.022-0.004-0.044-0.004-0.065c3.007-1.829,5.209-4.852,5.918-8.416\\n\\t\\t\\tc2.613,1.917,4.319,4.999,4.319,8.48C35.788,30.313,31.068,35.034,25.266,35.034z', 'style': { 'fill': '#000000' } })\r\n\r\n\r\nconst Tab = ({ attrs: { key } }) => {\r\n  return {\r\n    oncreate: animateHeaderEntrance,\r\n    view: ({ attrs: { tab } }) =>\r\n      m(\r\n        'a.tab',\r\n        {\r\n          key,\r\n          id: `${tab}`,\r\n          href: `/${tab}`,\r\n          oncreate: m.route.link,\r\n        },\r\n        tab\r\n      ),\r\n  }\r\n}\r\n\r\nconst Header = ({ attrs: { model } }) => {\r\n  let tabs = Object.keys(model.reqs.urls)\r\n  let navTabs = without(['item/:key', 'user:/key'], tabs)\r\n\r\n  return {\r\n    oncreate: animateHeaderEntrance,\r\n    view: ({ attrs: { model } }) =>\r\n      m(\r\n        '.header',\r\n        {\r\n          id: 'header',\r\n        },\r\n        [m('svg', { width: '50px', 'version': '1.1', 'xmlns': 'http://www.w3.org/2000/svg', 'xmlns:xlink': 'http://www.w3.org/1999/xlink', 'style': { 'enable-background': 'new 0 0 38.044 38.044' } },mithrilIcon),\r\n          navTabs.map((tab, idx) =>\r\n            m(Tab, {\r\n              key: idx,\r\n              active: model.state.route == tab,\r\n              tab,\r\n            })\r\n          )]\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Header\r\n","import m from 'mithril'\r\nimport { animate, animateChildrenLimitsEntrance } from '../utils/animations.js'\r\n\r\n\r\nconst Footer = {\r\n  oncreate: animate('slideUp'),\r\n  view: () => m('footer.footer', {\r\n    oncreate:animateChildrenLimitsEntrance, id: 'footer',\r\n  },\r\n  'content served from https://api.hnpwa.com/',\r\n  ),\r\n}\r\n\r\nexport default Footer\r\n","import m from 'mithril'\r\nimport { animate } from '../utils/animations.js'\r\n\r\nconst Body = {\r\n  oncreate: animate('slideUp'),\r\n  view: ({attrs:{ children }}) => m('section.content', { id: 'content' }, children),\r\n}\r\n\r\nexport default Body\r\n","import m from 'mithril'\r\nimport Header from './Header.js'\r\nimport Footer from './Footer.js'\r\nimport Body from './Body.js'\r\n\r\nconst Layout = ({ attrs: { model } }) => {\r\n  return {\r\n    view: ({ children }) =>\r\n      m(\r\n        'section.layout',\r\n        {\r\n          id: 'layout',\r\n        },\r\n        children\r\n          ? [\r\n            m(Header, { model }),\r\n            m(Body, { model, children}),\r\n            m(Footer, { model }),\r\n          ]\r\n          : []\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Layout\r\n","import m from 'mithril'\r\nimport Layout from './components/Layout.js'\r\nimport {makeRoutes, isEmpty, init, infiniteScroll, animateComponentEntrance } from './utils/index.js'\r\n\r\nconst IsLoading = m('.holder',  [\r\n  m('.preloader', [ m('div'), m('div'), m('div'), m('div'), m('div'), m('div'), m('div') ]),\r\n])\r\n\r\nconst Post = {\r\n  view: ({ attrs: { showItem, post: { comments_count,\r\n    domain,\r\n    id,\r\n    points,\r\n    time_ago,\r\n    title,\r\n    url,\r\n    user } } }) => {\r\n    return m(\r\n      '.container',\r\n      {\r\n        id: `${id}`,\r\n      },\r\n      [\r\n        m('.top', [\r\n          m('h1.title', title), m('code.subTitle', ' from ', m('a.', { oncreate: m.route.link, href: url }, `${domain}`)),\r\n        ]),\r\n        m('.bottom', [\r\n          m('.left', [\r\n            m('a.top.highlight', ` by ${user}`),\r\n            m('code.bottom', `${time_ago}`),\r\n          ]),\r\n          m('.right', [\r\n            m('code.highlight.top', `${points} points`),\r\n            m('a.bottom', {\r\n              oncreate: m.route.link,\r\n              href: `/item/${id}`,\r\n              onclick: () => showItem(id, title),\r\n            },\r\n            `${comments_count} comments`),\r\n          ]),\r\n        ]),\r\n      ])\r\n  },\r\n}\r\n\r\nconst Comment = {\r\n  view: ({ attrs:{ key, model, comment: { comments, comments_count,\r\n    id,\r\n    time_ago,\r\n    content,\r\n    url, level,\r\n    user } } }) => {\r\n    return m(\r\n      '.',\r\n      {\r\n        id: `${id}`,\r\n      },\r\n      [\r\n        m('.',[\r\n          m('a.nudgeRight.highlight', `${user}`),\r\n          m('code', `${time_ago}`),\r\n        ]),\r\n        m('.nudgeRight',[\r\n          m('code', m.trust(content)),\r\n          comments_count ? m('button',{onclick:() => model.toggleComments({model, key,level} ) } ,`unfold ${comments_count} comments`): '',\r\n          (model.state.comment[`${key}-${level}`] ? comments.map((c, idx) => m(Comment, {\r\n            key: idx,\r\n            comment: c,\r\n            model,\r\n          })): ''),\r\n        ]),\r\n      ]\r\n    )\r\n  },\r\n}\r\n\r\n\r\nconst Component = () => {\r\n  const isPost = data => data.map\r\n  const isComment= data => data.comments.map\r\n\r\n  return {\r\n    view: ({ attrs: { model } }) => {\r\n      let route = model.state.route\r\n      let data = model.data[route].data\r\n      let showItem = (id, title = '') => {\r\n        model.state.title = title\r\n        model.state.id = id\r\n        model.state.showComment = !model.state.showComment\r\n      }\r\n      return m(\r\n        'section.component',\r\n        {\r\n          id: 'component',\r\n          route: model.state.route,\r\n          onscroll: infiniteScroll(model),\r\n        },\r\n        isEmpty(data)\r\n          ? m('.loader', IsLoading)\r\n          : isPost(data) ? data.map((_post, idx) =>\r\n            m(Post, {\r\n              oncreate: animateComponentEntrance(idx),\r\n              key: idx,\r\n              post: _post,\r\n              model, showItem,\r\n            })\r\n          ) : isComment(data) ? [\r\n            m('h1.title', data.title),\r\n            data.comments.map((c, idx) =>\r\n              m(Comment, {\r\n                oncreate: animateComponentEntrance(idx),\r\n                key: idx,\r\n                comment: c,\r\n                model,\r\n              })\r\n            )] : '' // add User component here...\r\n      )\r\n    },\r\n  }}\r\n\r\n\r\nconst toRoute = model => ({\r\n  onmatch: (_, path) =>\r\n    init(model)(path),\r\n  render: () =>\r\n    m(\r\n      Layout,\r\n      {\r\n        model,\r\n      },\r\n      m(Component, {\r\n        model,\r\n      })\r\n    ),\r\n})\r\n\r\nexport const App = model =>\r\n  model.routes.reduce(makeRoutes(model)(toRoute),{})\r\n","export const isEmpty = data => data.length == 0\r\n\r\nexport const infiniteScroll = model => e => {\r\n  let route = model.state.route\r\n  let length = model.data[route].data.length\r\n  let setpoint = 10 * length * model.state.scrollPos\r\n  if (e.target.scrollTop - model.state.scrollPos >= setpoint) {\r\n    model.state.scrollPos++ + e.target.scrollTop\r\n    if (length < model.data[route].limit) {\r\n      model.getData(model)(route)\r\n    }\r\n  }\r\n}\r\n\r\nexport const init = model => path => {\r\n  model.state.page = 1\r\n  model.state.scrollPos = 1\r\n  model.state.tabsShowing = false\r\n  let id =  path.split('/')[2]\r\n  let route = path.split('/')[1]\r\n  return id ? model.getComments(model)(route)(id) : model.getData(model)(path)\r\n}\r\n\r\nexport const makeRoutes = model => toRoute => (routes, route) => {\r\n  routes[`/${route}`] = toRoute(model)\r\n  return routes\r\n}\r\n","import m from 'mithril'\r\nconst root = document.body\r\nimport { model } from './Model.js'\r\n\r\nimport { App } from './App.js'\r\n\r\n\r\nif (module.hot) {\r\n  module.hot.accept()\r\n}\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  console.log('Looks like we are in development mode!')\r\n}\r\n\r\n// Styles\r\nimport './index.css'\r\nimport './utils/animations.css'\r\nimport './utils/loader.css'\r\n\r\nfunction getProfile(w) {\r\n  if (w < 668) return 'phone'\r\n  if (w < 920) return 'tablet'\r\n  return 'desktop'\r\n}\r\n\r\nlet winW = window.innerWidth\r\nmodel.state.profile = getProfile(winW)\r\n\r\nfunction checkWidth() {\r\n  const w = window.innerWidth\r\n  if (winW !== w) {\r\n    winW = w\r\n    var lastProfile = model.state.profile\r\n    model.state.profile = getProfile(w)\r\n    if (lastProfile != model.state.profile) m.redraw()\r\n  }\r\n  requestAnimationFrame(checkWidth)\r\n}\r\n\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', () => {\r\n    navigator.serviceWorker.register('./service-worker.js').then(registration => {\r\n      console.log('🧟 SW registered: ', registration)\r\n    }).catch(registrationError => {\r\n      console.log('⚙️ SW registration failed: ', registrationError)\r\n    })\r\n  })\r\n}\r\n\r\n\r\ncheckWidth()\r\n\r\nm.route(root, '/news', App(model))\r\n"],"sourceRoot":""}