{"version":3,"sources":["webpack:///./Model.js","webpack:///./components/Hamburger.js","webpack:///./utils/animations.js","webpack:///./components/Header.js","webpack:///./components/Footer.js","webpack:///./components/Sidebar.js","webpack:///./components/Modal.js","webpack:///./components/Body.js","webpack:///./components/Layout.js","webpack:///./App.js","webpack:///./utils/helpers.js","webpack:///./index.js"],"names":["m","__webpack_require__","d","__webpack_exports__","model","routes","urls","reduce","req","route","page","path","split","concat","url","getComments","id","console","log","state","data","reqs","http","getData","showComment","getPath","request","method","then","scrollPos","profile","tabsShowing","title","showComments","changePage","delta","showTabs","Hamburger","_ref","attrs","render","dom","xmlns","oncreate","_ref2","onupdate","_ref3","view","_ref4","style","fill","onclick","animateComponentEntrance","idx","opacity","setTimeout","classList","toggle","animateSidebarEntrance","animateChildrenLimitsEntrance","animate","dir","_ref5","Paginate","Header","Footer","Tab","key","tab","href","link","Sidebar","tabs","Object","keys","navTabs","without","map","active","Modal","onbeforeremove","_ref6","Promise","remove","add","children","Body","Layout","IsLoading","Item","_ref$attrs","showItem","_ref$attrs$item","item","comments_count","domain","points","time_ago","user","Comment","_ref3$attrs","_ref3$attrs$item","content","trust","Component","arguments","length","undefined","onscroll","e","setpoint","target","scrollTop","limit","infiniteScroll","isEmpty","isItem","_item","comments","isComment","backgroundColor","toRoute","onmatch","_","init","root","document","body","getProfile","w","winW","window","innerWidth","navigator","addEventListener","serviceWorker","register","registration","catch","registrationError","checkWidth","lastProfile","redraw","requestAnimationFrame","makeRoutes"],"mappings":"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","file":"main-chunk.js","sourcesContent":["\r\nconst routes = ['news', 'newest', 'ask', 'show', 'jobs', 'item/:key', 'user:/key']\r\n\r\nconst url = route => page => {\r\n  let path = route.split('/')[0]\r\n  return `https://api.hnpwa.com/v0/${path}/${page}.json`\r\n}\r\n\r\nconst urls = routes.reduce((req, route) => {\r\n  req[route] = url(route)\r\n  return req\r\n}, {})\r\n\r\nconst http = model => url => route => m\r\n  .request({\r\n    url,\r\n    method: 'GET',\r\n  })\r\n  .then(data => {\r\n    model.data[route].data = data\r\n    return model\r\n  })\r\n\r\nconst reqs = {\r\n  urls,\r\n  http,\r\n}\r\n\r\nconst getData = model => route => {\r\n  model.state.showComment = false\r\n  console.log(model.reqs.urls, route)\r\n  model.state.route = route\r\n  let path = model.getPath(route)\r\n  model.data[route] ? model.data[route] : (model.data[route] = { data: [] })\r\n  model.reqs.http(model)(model.reqs.urls[path](model.state.page))(route)\r\n}\r\n\r\nconst getComments = model => route => id => {\r\n  console.log(model)\r\n  model.state.route = route\r\n  model.data[route] ? model.data[route] : (model.data[route] = { data: [] })\r\n  model.reqs.http(model)(model.reqs.urls['item/:key'](id))(route)\r\n}\r\n\r\nconst getPath = route => route.split('/')[1]\r\n\r\nexport const model = {\r\n  getComments,\r\n  getData,\r\n  routes,\r\n  getPath,\r\n  reqs,\r\n  data: {},\r\n  state: { url: '', route: '', scrollPos: 1, page: 1, profile: '', tabsShowing: false, title: '', showComments: false },\r\n  changePage: delta => model => {\r\n    model.state.page = model.state.page + delta\r\n    model.getData(model)(model.state.route)\r\n  },\r\n  showComments: model => model.state.showComments = !model.state.showComments,\r\n  showTabs: model =>\r\n    model.state.tabsShowing = !model.state.tabsShowing,\r\n}\r\n","import m from 'mithril'\r\n\r\nconst Hamburger = ({ attrs: { model } }) => {\r\n  const state = {\r\n    close:\r\n      'M10 8.586L2.929 1.515 1.515 2.929 8.586 10l-7.071 7.071 1.414 1.414L10 11.414l7.071 7.071 1.414-1.414L11.414 10l7.071-7.071-1.414-1.414L10 8.586z',\r\n    open: 'M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z',\r\n  }\r\n\r\n  const render = dom =>{\r\n    return m.render(\r\n      dom,\r\n      m('path', {\r\n        xmlns: 'http://www.w3.org/2000/svg',\r\n        d: model.state.tabsShowing ? state.close : state.open,\r\n      })\r\n    )}\r\n\r\n  return {\r\n    oncreate: ({ dom }) => {\r\n      let _dom = dom\r\n      return render(_dom)\r\n    },\r\n    onupdate: ({ dom }) => {\r\n      let _dom = dom\r\n      return render(_dom)\r\n    },\r\n    view: ({ attrs: { model } }) =>\r\n      m('svg.btn.hamburger', {\r\n        style:{fill: model.state.tabsShowing? 'white': 'inherit'},\r\n        onclick: () => model.showTabs(model),\r\n      }),\r\n  }\r\n}\r\n\r\nexport default Hamburger\r\n","export const animateComponentEntrance = idx => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  return setTimeout(() => {\r\n    dom.classList.toggle('stretchRight')\r\n    dom.style.opacity = 1\r\n  }, idx * 100 + 20)\r\n}\r\n\r\nexport const animateSidebarEntrance = ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  dom.classList.toggle('slideRight')\r\n  dom.style.opacity = 1\r\n}\r\n\r\nexport const animateChildrenEntrance = ({ dom }) => {\r\n  let children = [ ...dom.children ]\r\n\r\n  return children.map((child, idx) => {\r\n    child.style.opacity = 0\r\n    setTimeout(() => {\r\n      child.classList.toggle('slideRight')\r\n      child.style.opacity = 1\r\n    }, (idx + 1) * 10)\r\n  })\r\n}\r\n\r\nexport const animateChildrenLimitsEntrance = idx => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle('slideDown')\r\n    dom.style.opacity = 1\r\n  }, (idx + 1) * 200)\r\n}\r\n\r\nexport const animate = dir => ({ dom }) => {\r\n  dom.style.opacity = 0\r\n  setTimeout(() => {\r\n    dom.classList.toggle(dir)\r\n    dom.style.opacity = 1\r\n  },  200)\r\n}\r\n\r\nexport const slideModalOut = ({ dom }) => {\r\n  return new Promise(() => {\r\n    dom.classList.remove('slideRight')\r\n    return setTimeout(()=> {\r\n      dom.classList.add('reverseAnimation', 'slideRight')\r\n    } , 200)\r\n  })\r\n}\r\n\r\n\r\nexport const animateChildrenLimitsExit = ({ dom }) =>\r\n  new Promise(() => {\r\n    [ ...dom.children ].reverse().map((child, idx) => {\r\n      return setTimeout(() => {\r\n        child.style.display = 'none'\r\n      }, idx * 100)\r\n    })\r\n  })\r\n\r\n","import m from 'mithril'\r\nimport Hamburger from './Hamburger.js'\r\nimport { animate } from '../utils/animations.js'\r\n\r\n\r\nconst Paginate = {\r\n  view: ({ attrs: { model } }) =>\r\n    m('.btnContainer', [\r\n      m(\r\n        'button.btn',\r\n        {\r\n          onclick: () => model.changePage(-1)(model),\r\n        },\r\n        'Prev'\r\n      ), m(\r\n        'button.btn',\r\n        {\r\n          onclick: () => model.changePage(+1)(model),\r\n        },\r\n        'Next'\r\n      ),\r\n    ]),\r\n}\r\n\r\nconst Header = {\r\n  oncreate: animate('slideDown'),\r\n  view: ({ attrs: { model } }) =>\r\n    m(\r\n      'header.header',\r\n      {\r\n        id: 'header',\r\n      },[\r\n        m(Hamburger, { model }),\r\n        model.state.showComment\r\n          ? m('button.btn', {onclick: () => console.log('back to ...', model)},'Go BAck Up')\r\n          : m(Paginate, { model }),\r\n      ]\r\n    ),\r\n}\r\n\r\nexport default Header\r\n","import m from 'mithril'\r\nimport { animate, animateChildrenLimitsEntrance } from '../utils/animations.js'\r\n\r\n\r\nconst Footer = {\r\n  oncreate: animate('slideUp'),\r\n  view: () => m('footer.footer', {\r\n    oncreate:animateChildrenLimitsEntrance, id: 'footer',\r\n  },\r\n  'content served from https://jsonplaceholder.typicode.com',\r\n  ),\r\n}\r\n\r\nexport default Footer\r\n","import m from 'mithril'\r\nimport { animateSidebarEntrance } from '../utils/animations.js'\r\nimport { without } from 'ramda'\r\n\r\nconst Tab = ({ attrs: { key } }) => {\r\n  return {\r\n    oncreate: animateSidebarEntrance,\r\n    view: ({ attrs: { tab } }) =>\r\n      m(\r\n        'a.tab',\r\n        {\r\n          key,\r\n          id: `${tab}`,\r\n          href: `/${tab}`,\r\n          oncreate: m.route.link,\r\n        },\r\n        tab\r\n      ),\r\n  }\r\n}\r\n\r\nconst Sidebar = ({ attrs: { model } }) => {\r\n  let tabs = Object.keys(model.reqs.urls)\r\n  let navTabs = without(['item/:key', 'user:/key'], tabs)\r\n\r\n  return {\r\n    oncreate: animateSidebarEntrance,\r\n    view: ({ attrs: { model } }) =>\r\n      m(\r\n        'aside.sidebar slide-left',\r\n        {\r\n          id: 'sidebar',\r\n        },\r\n        navTabs.map((tab, idx) =>\r\n          m(Tab, {\r\n            key: idx,\r\n            active: model.state.route == tab,\r\n            tab,\r\n          })\r\n        )\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Sidebar\r\n","import m from 'mithril'\r\nimport { animateSidebarEntrance,slideModalOut } from '../utils/animations.js'\r\n\r\nconst Modal = {\r\n  oncreate: animateSidebarEntrance,\r\n  onbeforeremove:slideModalOut,\r\n  view: ({ children }) => m('.navigationModal', children),\r\n}\r\n\r\nexport default Modal\r\n","import m from 'mithril'\r\nimport { animate } from '../utils/animations.js'\r\n\r\nconst Body = {\r\n  oncreate: animate('slideUp'),\r\n  view: ({attrs:{ children }}) => m('section.content', { id: 'content' }, children),\r\n}\r\n\r\nexport default Body\r\n","import m from 'mithril'\r\nimport Header from './Header.js'\r\nimport Footer from './Footer.js'\r\nimport Sidebar from './Sidebar.js'\r\nimport Modal from './Modal.js'\r\nimport Body from './Body.js'\r\n\r\nconst Layout = ({ attrs: { model } }) => {\r\n  return {\r\n    view: ({ children }) =>\r\n      m(\r\n        'section.layout',\r\n        {\r\n          id: 'layout',\r\n        },\r\n        children\r\n          ? [\r\n            m(Header, { model }),\r\n            model.state.profile == 'phone'\r\n              ? model.state.tabsShowing ? m(Modal, m(Sidebar, { model })) : null\r\n              : m(Sidebar, { model }),\r\n            m(Body, { model, children}),\r\n            m(Footer, { model }),\r\n          ]\r\n          : []\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Layout\r\n","import m from 'mithril'\r\nimport Layout from './components/Layout.js'\r\nimport {makeRoutes, isEmpty, init, infiniteScroll, animateComponentEntrance } from './utils/index.js'\r\n\r\nconst IsLoading = m('.holder',  [\r\n  m('.preloader', [ m('div'), m('div'), m('div'), m('div'), m('div'), m('div'), m('div') ]),\r\n])\r\n\r\nconst Item = {\r\n  view: ({ attrs: { showItem, item: { comments_count,\r\n    domain,\r\n    id,\r\n    points,\r\n    time_ago,\r\n    title,\r\n    url,\r\n    user } } }) => {\r\n    return m(\r\n      '.grid-item',\r\n      {\r\n        href:url,\r\n        id: `${id}`,\r\n      },\r\n      [\r\n        m('.postTop', [\r\n          m('h1.title', title), m('code.subTitle', ` from ${domain}`)]),\r\n        m('.postBottom', [\r\n          m('.',[\r\n            m('code.points',`${points}`), m('a', ` points by ${user}`),\r\n\r\n          ]),\r\n          m('.row', [\r\n            m('code.left', `${time_ago}`),\r\n            m('a.right', { oncreate: m.route.link, href: `/item/${id}`, onclick: () => showItem(id, title)},`${comments_count} comments`),\r\n          ]),\r\n        ]),\r\n      ]\r\n    )\r\n  },\r\n}\r\n\r\nconst Comment = ({attrs:{model}}) => {\r\n  console.log('???',model)\r\n  return {\r\n    view: ({ attrs: { model, item: { comments_count,\r\n      id,\r\n      time_ago,\r\n      content,\r\n      url,\r\n      user } } }) => {\r\n\r\n      return m(\r\n        '.grid-item',\r\n        {\r\n          href: url,\r\n          id: `${id}`,\r\n        },\r\n        [\r\n          m('.postTop', m('h1.title', model.state.title)),\r\n          m('.postBottom', [\r\n            m('.', [\r\n              m('code', m.trust(content)), m('a', `  by ${user}`),\r\n            ]),\r\n            m('.row', [\r\n              m('code.left', `${time_ago}`),\r\n              m('a.right', { oncreate: m.route.link, href: `/item/${id}`, onclick: () => model.state.id = id }, `${comments_count} comments`),\r\n            ]),\r\n          ]),\r\n        ]\r\n      )\r\n    },\r\n  }}\r\n\r\n\r\nconst Component = () => {\r\n  const isItem = data => data.map\r\n  const isComment= data => data.comments.map\r\n\r\n  return {\r\n    view: ({ attrs: { model } }) => {\r\n      let route = model.state.route\r\n      let data = model.data[route].data\r\n      let showItem = (id, title = '') => {\r\n        console.log(id)\r\n        model.state.title = title\r\n        model.state.id = id\r\n        model.state.showComment = !model.state.showComment\r\n      }\r\n\r\n      return m(\r\n        'section.component',\r\n        {\r\n          id: 'component',\r\n          route: model.state.route,\r\n          onscroll: infiniteScroll(model),\r\n        },\r\n        isEmpty(data)\r\n          ? m('.loader', IsLoading)\r\n          : isItem(data) ? data.map((_item, idx) =>\r\n            m(Item, {\r\n              oncreate: animateComponentEntrance(idx),\r\n              key: idx,\r\n              item: _item,\r\n              model, showItem,\r\n            })\r\n          ) : isComment(data) ? [m(Comment, {\r\n            style: { backgroundColor:'rgba(225, 102, 0, .9)'},\r\n            item: data,\r\n            model,\r\n          }), data.comments.map((_item, idx) =>\r\n            m(Comment, {\r\n              oncreate: animateComponentEntrance(idx),\r\n              key: idx,\r\n              item: _item,\r\n              model,\r\n            })\r\n          )] : '' // add User component here...\r\n      )\r\n    },\r\n  }}\r\n\r\n\r\nconst toRoute = model => ({\r\n  onmatch: (_, path) => {\r\n    init(model)(path)\r\n  },\r\n  render: () =>\r\n    m(\r\n      Layout,\r\n      {\r\n        model,\r\n      },\r\n      m(Component, {\r\n        model,\r\n      })\r\n    ),\r\n})\r\n\r\nexport const App = model =>\r\n  model.routes.reduce(makeRoutes(model)(toRoute),{})\r\n","export const isEmpty = data => data.length == 0\r\n\r\nexport const infiniteScroll = model => e => {\r\n  let route = model.state.route\r\n  let length = model.data[route].data.length\r\n  let setpoint = 10 * length * model.state.scrollPos\r\n  if (e.target.scrollTop - model.state.scrollPos >= setpoint) {\r\n    model.state.scrollPos++ + e.target.scrollTop\r\n    if (length < model.data[route].limit) {\r\n      model.getData(model)(route)\r\n    }\r\n  }\r\n}\r\n\r\nexport const init = model => path => {\r\n  model.state.page = 1\r\n  model.state.tabsShowing = false\r\n  let id =  path.split('/')[2]\r\n  let route = path.split('/')[1]\r\n  return id ? model.getComments(model)(route)(id) : model.getData(model)(path)\r\n}\r\n\r\nexport const makeRoutes = model => toRoute => (routes, route) => {\r\n  routes[`/${route}`] = toRoute(model)\r\n  return routes\r\n}\r\n","import m from 'mithril'\r\nconst root = document.body\r\nimport { model } from './Model.js'\r\n\r\nimport { App } from './App.js'\r\n\r\n\r\nif (module.hot) {\r\n  module.hot.accept()\r\n}\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  console.log('Looks like we are in development mode!')\r\n}\r\n\r\n// Styles\r\nimport './index.css'\r\nimport './utils/animations.css'\r\nimport './utils/loader.css'\r\n\r\nfunction getProfile(w) {\r\n  if (w < 668) return 'phone'\r\n  if (w < 920) return 'tablet'\r\n  return 'desktop'\r\n}\r\n\r\nlet winW = window.innerWidth\r\nmodel.state.profile = getProfile(winW)\r\n\r\nfunction checkWidth() {\r\n  const w = window.innerWidth\r\n  if (winW !== w) {\r\n    winW = w\r\n    var lastProfile = model.state.profile\r\n    model.state.profile = getProfile(w)\r\n    if (lastProfile != model.state.profile) m.redraw()\r\n  }\r\n  requestAnimationFrame(checkWidth)\r\n}\r\n\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', () => {\r\n    navigator.serviceWorker.register('./service-worker.js').then(registration => {\r\n      console.log('üßü SW registered: ', registration)\r\n    }).catch(registrationError => {\r\n      console.log('‚öôÔ∏è SW registration failed: ', registrationError)\r\n    })\r\n  })\r\n}\r\n\r\n\r\ncheckWidth()\r\n\r\nm.route(root, '/news', App(model))\r\n"],"sourceRoot":""}