{"version":3,"sources":["webpack:///./Model.js","webpack:///./components/Modal.js","webpack:///./components/Header.js","webpack:///./components/Footer.js","webpack:///./components/Body.js","webpack:///./components/Layout.js","webpack:///./App.js","webpack:///./utils/helpers.js","webpack:///./index.js"],"names":["m","__webpack_require__","d","__webpack_exports__","model","routes","urls","reduce","req","route","page","path","split","concat","url","getData","state","showComment","comment","getPath","data","reqs","http","getDataById","id","prev","request","method","then","key","profile","tabsShowing","title","showModal","showUser","user","toggleComments","_ref","level","toggleModal","toggleUser","console","log","Header","view","_ref$attrs","attrs","close","onclick","Content","_ref2","children","Footer","_ref3","Modal","oninit","_ref4","_ref4$attrs","init","_ref5","_ref5$attrs","contents","footer","mithrilIcon","style","fill","ModalStuff","rel","target","href","Tab","_ref2$attrs","tab","isActive","oncreate","link","tabs","Object","keys","navTabs","without","map","idx","_objectSpread","Body","Layout","IsLoading","Post","showItem","_ref$attrs$post","post","comments_count","domain","points","time_ago","toComment","Comment","_ref2$attrs$comment","comments","content","showComments","trust","arguments","length","undefined","toUnFurl","c","Component","onscroll","e","setpoint","scrollPos","scrollTop","limit","infiniteScroll","isEmpty","isPost","_post","isComment","App_objectSpread","created","about","karma","userModalInfo","toRoute","onmatch","_","render","root","document","body","getProfile","w","winW","window","innerWidth","navigator","addEventListener","serviceWorker","register","registration","catch","registrationError","checkWidth","lastProfile","redraw","requestAnimationFrame","makeRoutes"],"mappings":"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","file":"main-chunk.js","sourcesContent":["\r\nconst routes = ['news', 'newest', 'ask', 'show', 'jobs', 'item/:key', 'user/:key']\r\n\r\nconst url = route => page => {\r\n  let path = route.split('/')[0]\r\n  return `https://api.hnpwa.com/v0/${path}/${page}.json`\r\n}\r\n\r\nconst urls = routes.reduce((req, route) => {\r\n  req[route] = url(route)\r\n  return req\r\n}, {})\r\n\r\nconst http = model => url => route => m\r\n  .request({\r\n    url,\r\n    method: 'GET',\r\n  })\r\n  .then(data => {\r\n    model.data[route].data = data\r\n    return model\r\n  })\r\n\r\nconst reqs = {\r\n  urls,\r\n  http,\r\n}\r\n\r\nconst getData = model => route => {\r\n  model.state.showComment = false\r\n  model.state.comment = {}\r\n  model.state.route = route\r\n  let path = model.getPath(route)\r\n  model.data[route] ? model.data[route] : (model.data[route] = { data: [] })\r\n  model.reqs.http(model)(model.reqs.urls[path](model.state.page))(route)\r\n}\r\n\r\nconst getDataById = model => route => id => {\r\n  model.state.prev = model.state.route\r\n\r\n  if(route == 'item'){\r\n    model.state.route = route\r\n  }\r\n\r\n\r\n  model.data[route] ? model.data[route] : (model.data[route] = { data: [] })\r\n  model.reqs.http(model)(model.reqs.urls[`${route}/:key`](id))(route)\r\n}\r\n\r\nconst getPath = route => route.split('/')[1]\r\n\r\n\r\nconst state = {\r\n  key: '',\r\n  url: '',\r\n  route: '',\r\n  page: 1,\r\n  profile: '',\r\n  tabsShowing: false,\r\n  title: '',\r\n  comment: {},\r\n  showModal: false,\r\n  showUser: false,\r\n  user:{id:''},\r\n}\r\n\r\n\r\nconst toggleComments = ({model, key, level}) =>\r\n  model.state.comment[`${key}-${level}`] ?\r\n    model.state.comment[`${key}-${level}`] = !model.state.comment[`${key}-${level}`] : model.state.comment[`${key}-${level}`] = true\r\n\r\n\r\nconst toggleModal = model =>\r\n  model.state.showModal = !model.state.showModal\r\n\r\nconst toggleUser = model => id =>  {\r\n  model.state.user.id = id\r\n  model.state.showUser = !model.state.showUser\r\n  console.log(model)\r\n}\r\n\r\n\r\nexport const model = {\r\n  getData,\r\n  getDataById,\r\n  routes,\r\n  getPath,\r\n  reqs,\r\n  data: {},\r\n  state,\r\n  toggleComments,\r\n  toggleModal,\r\n  toggleUser,\r\n}\r\n","import m from 'mithril'\r\n// import { animateModalEntrance } from '../utils/animations.js'\r\n\r\nconst Header = {\r\n  view: ({ attrs: {title, model, close} }) => {\r\n    return m('.modal-header', [\r\n      m('h4.title', title),\r\n      m('button.closeBtn', {\r\n        onclick: () =>\r\n          close(model),\r\n      },'X'),\r\n    ])\r\n  },\r\n}\r\n\r\nconst Content =  {\r\n  view: ({children}) =>\r\n    m('.modal-contents',\r\n      children,\r\n    ),\r\n}\r\n\r\nconst Footer =  {\r\n  view: ({ children }) =>\r\n    m('.modal-footer',children),\r\n}\r\n\r\n\r\n\r\nconst Modal = {\r\n  oninit:({attrs:{init, model}}) => init(model),\r\n  view: ({ attrs:{title, contents, footer, model, close }}) =>\r\n    m('section.modalContainer',\r\n      m('.modal', {\r\n        // oncreate: animateModalEntrance,\r\n      }, [\r\n        m(Header, { title, model, close }),\r\n        m(Content, contents),\r\n        m(Footer, footer ),\r\n      ])),\r\n}\r\n\r\nexport default Modal\r\n","import m from 'mithril'\r\n// import { animateHeaderEntrance } from '../utils/animations.js'\r\nimport { without } from 'ramda'\r\nimport Modal from './Modal.js'\r\n\r\nconst mithrilIcon = m('path', { 'd': 'M31.716,13.5C31.699,6.47,25.974,0.755,18.94,0.755c-7.045,0-12.777,5.732-12.777,12.777\\n\\t\\t\\tc0,0.022,0.004,0.043,0.004,0.065C2.477,15.84,0,19.887,0,24.511c0,7.046,5.731,12.777,12.777,12.777\\n\\t\\t\\tc2.268,0,4.395-0.601,6.244-1.642c1.849,1.041,3.977,1.642,6.245,1.642c7.046,0,12.777-5.732,12.777-12.777\\n\\t\\t\\tC38.043,19.82,35.495,15.722,31.716,13.5z M19.021,32.961c-2.312-1.713-3.906-4.341-4.22-7.352c1.3,0.448,2.689,0.702,4.139,0.702\\n\\t\\t\\tc1.514,0,2.96-0.278,4.307-0.764C22.949,28.584,21.349,31.236,19.021,32.961z M8.517,14.898c1.303-0.579,2.743-0.909,4.26-0.909\\n\\t\\t\\tc1.475,0,2.879,0.307,4.154,0.858c-2.114,1.826-3.629,4.325-4.195,7.167C10.473,20.352,8.898,17.814,8.517,14.898z M18.94,24.055\\n\\t\\t\\tc-1.457,0-2.846-0.298-4.109-0.837c0.361-2.928,1.929-5.482,4.19-7.157c2.243,1.662,3.802,4.187,4.18,7.085\\n\\t\\t\\tC21.897,23.727,20.457,24.055,18.94,24.055z M21.111,14.846c1.275-0.55,2.679-0.858,4.154-0.858c1.457,0,2.846,0.298,4.11,0.837\\n\\t\\t\\tc-0.356,2.885-1.883,5.404-4.089,7.082C24.704,19.108,23.199,16.65,21.111,14.846z M18.94,3.01c5.432,0,9.915,4.137,10.466,9.425\\n\\t\\t\\tc-1.3-0.447-2.689-0.702-4.14-0.702c-2.268,0-4.396,0.601-6.245,1.642c-1.848-1.041-3.975-1.642-6.244-1.642\\n\\t\\t\\tc-1.514,0-2.96,0.278-4.307,0.763C8.993,7.179,13.488,3.01,18.94,3.01z M12.777,35.034c-5.803,0-10.523-4.72-10.523-10.523\\n\\t\\t\\tc0-3.418,1.645-6.451,4.177-8.375c0.744,3.581,2.999,6.607,6.059,8.408c0.011,3.847,1.735,7.293,4.442,9.631\\n\\t\\t\\tC15.656,34.727,14.253,35.034,12.777,35.034z M25.266,35.034c-1.475,0-2.879-0.307-4.154-0.858\\n\\t\\t\\tc2.715-2.345,4.444-5.804,4.444-9.664c0-0.022-0.004-0.044-0.004-0.065c3.007-1.829,5.209-4.852,5.918-8.416\\n\\t\\t\\tc2.613,1.917,4.319,4.999,4.319,8.48C35.788,30.313,31.068,35.034,25.266,35.034z', 'style': { 'fill': 'white' } })\r\n\r\nconst ModalStuff = {\r\n  init: () => {},\r\n  close: model => model.toggleModal(model) ,\r\n  title: 'About',\r\n  contents: [m('p', 'built with ', m('a', { rel:'noopener', target: '_blank',href: 'https://mithril.js.org' }, ' Mithril.JS'), ' and webpack'), m('p', 'source code: ', m('a', { rel:'noopener', target: '_blank',href: 'https://github.com/boazblake/mithril-hn-pwa'}, 'can be found here')) ],\r\n  footer: [m('p', 'made by @boazblake')],\r\n}\r\n\r\nconst Tab = ({ attrs: { key } }) => {\r\n  return {\r\n    // oncreate: animateHeaderEntrance,\r\n    view: ({ attrs: { tab, isActive } }) =>\r\n      m(\r\n        `a.tab.${isActive? 'underline' :''}`,\r\n        {\r\n          key,\r\n          id: `${tab}`,\r\n          href: `/${tab}`,\r\n          oncreate: m.route.link,\r\n        },\r\n        tab\r\n      ),\r\n  }\r\n}\r\n\r\nconst Header = ({ attrs: { model } }) => {\r\n  let tabs = Object.keys(model.reqs.urls)\r\n  let navTabs = without(['item/:key', 'user/:key'], tabs)\r\n  return {\r\n    // oncreate: animateHeaderEntrance,\r\n    view: ({ attrs: { model } }) =>\r\n      m(\r\n        '.header',\r\n        {\r\n          id: 'header',\r\n        },\r\n        [m('svg.brand', {onclick:() => model.toggleModal(model)},mithrilIcon),\r\n          navTabs.map((tab, idx) =>\r\n            m(Tab, {\r\n              key: idx,\r\n              isActive: model.state.route == `/${tab}`,\r\n              tab,\r\n            })\r\n          ), model.state.showModal ? m(Modal, {...ModalStuff,model}) : '' ]\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Header\r\n","import m from 'mithril'\r\n// import { animate, animateFooterEntrance } from '../utils/animations.js'\r\n\r\n\r\nconst Footer = {\r\n  // oncreate: animate('slideRight'),\r\n  view: () => m('footer.footer', {\r\n    // oncreate: animateFooterEntrance,\r\n    id: 'footer',\r\n  },\r\n  'content served from https://api.hnpwa.com/',\r\n  ),\r\n}\r\n\r\nexport default Footer\r\n","import m from 'mithril'\r\n// import { animate } from '../utils/animations.js'\r\n\r\nconst Body = {\r\n  // oncreate: animate('slideLeft'),\r\n  view: ({attrs:{ children }}) => m('section.content', { id: 'content' }, children),\r\n}\r\n\r\nexport default Body\r\n","import m from 'mithril'\r\nimport Header from './Header.js'\r\nimport Footer from './Footer.js'\r\nimport Body from './Body.js'\r\n\r\nconst Layout = ({ attrs: { model } }) => {\r\n  return {\r\n    view: ({ children }) =>\r\n      m(\r\n        'section.layout',\r\n        {\r\n          id: 'layout',\r\n        },\r\n        children\r\n          ? [\r\n            m(Header, { model }),\r\n            m(Body, { model, children}),\r\n            m(Footer, { model }),\r\n          ]\r\n          : []\r\n      ),\r\n  }\r\n}\r\n\r\nexport default Layout\r\n","import m from 'mithril'\r\nimport Layout from './components/Layout.js'\r\nimport Modal from './components/Modal.js'\r\nimport { makeRoutes, isEmpty, init, infiniteScroll } from './utils/index'\r\n\r\nconst IsLoading = m('.holder',  [\r\n  m('.preloader', [ m('div'), m('div'), m('div'), m('div'), m('div'), m('div'), m('div') ]),\r\n])\r\n\r\nconst plus = 'M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z'\r\nconst minus = 'M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z'\r\n\r\nconst toUnFurl = (bool = false) => bool ?  m('path.highlight', { d: minus }) :  m('path.highlight', { d: plus })\r\n\r\nconst userModalInfo = model => ({\r\n  init: model => model.getDataById(model)('user')(model.state.user.id),\r\n  close: model => model.toggleUser(model)(''),\r\n  title: 'User',\r\n  contents: model.data.user && model.data.user.data\r\n    ? [\r\n      m('code', `id: ${model.data.user.data.id}`),\r\n      m('code', `created: ${model.data.user.data.created}`),\r\n      m('code' , `about: ${(model.data.user.data.about)}`),\r\n      m('code', `karma: ${model.data.user.data.karma}`),\r\n    ]\r\n    : [],\r\n  footer: [],\r\n})\r\n\r\n\r\n\r\nconst toComment = comments_count => showItem => (id, title) =>\r\n  comments_count ?\r\n    m('a.bottom', {\r\n      oncreate: m.route.link,\r\n      target: '_blank',\r\n      rel:'noopener',\r\n      href: `/item/${id}`,\r\n      onclick: () => showItem(id, title),\r\n    },\r\n    `${comments_count} comments`) : `${comments_count} comments`\r\n\r\nconst Post = {\r\n  view: ({ attrs: { model, showItem, post: { comments_count,\r\n    domain,\r\n    id,\r\n    points,\r\n    time_ago,\r\n    title,\r\n    url,\r\n    user } } }) => {\r\n    return m(\r\n      '.postContainer',\r\n      {\r\n        id: `${id}`,\r\n      },\r\n      [\r\n        m('.top', [\r\n          m('h1.title', title), m('code.subTitle', ' from ', m('a.', { target: '_blank', href: url, rel: 'noopener' }, `${domain}`)),\r\n        ]),\r\n        m('.bottom', [\r\n          m('.left', [\r\n            m('.top.highlight.cursor',{onclick: () => {\r\n              model.toggleUser(model)(user)\r\n            }},` by ${user}`),\r\n            m('code.bottom', `${time_ago}`),\r\n          ]),\r\n          m('.right', [\r\n            m('code.highlight.top', `${points} points`),\r\n            toComment(comments_count)(showItem)(id, title),\r\n          ]),\r\n        ]),\r\n      ])\r\n  },\r\n}\r\n\r\nconst Comment = {\r\n  view: ({ attrs:{ key, model, comment: { comments, comments_count,\r\n    id,\r\n    time_ago,\r\n    content,\r\n    level,\r\n    user } } }) => {\r\n\r\n    let state = {showComments : model.state.comment[`${key}-${level}`] || false }\r\n\r\n    return m(\r\n      '.commentContainer',\r\n      {\r\n        id: `${id}`,\r\n      },\r\n      [\r\n        m('.',[\r\n          m('a.highlight.cursor', {\r\n            onclick: () => {\r\n              model.toggleUser(model)(user)\r\n              console.log(user)\r\n            },\r\n          }, ` ${user}`),\r\n          m('code', ` ${time_ago}`),\r\n        ]),\r\n        m('.nudgeRight',[\r\n          m('code', m.trust(content)),\r\n          comments_count\r\n            ? m('button.commentBtn', { onclick: () => model.toggleComments({ model, key, level }) },\r\n              [m('svg.toggleCommentSvg', toUnFurl(state.showComments)), `${comments_count} comments`])\r\n            : '',\r\n          (state.showComments ? comments.map((c, idx) => m(Comment, {\r\n            key: idx,\r\n            comment: c,\r\n            model,\r\n          })): ''),\r\n        ]),\r\n      ]\r\n    )\r\n  },\r\n}\r\n\r\n\r\nconst Component = () => {\r\n  const isPost = data => data.map\r\n  const isComment = data => data.comments && data.comments.map\r\n\r\n  return {\r\n    view: ({ attrs: { model } }) => {\r\n      let route = model.state.route\r\n      let data = model.data[route].data\r\n\r\n      let showItem = (id, title = '') => {\r\n        model.state.title = title\r\n        model.state.id = id\r\n        model.state.showComment = !model.state.showComment\r\n      }\r\n      return m(\r\n        'section.component',\r\n        {\r\n          id: 'component',\r\n          route: model.state.route,\r\n          onscroll: infiniteScroll(model),\r\n        },\r\n        [isEmpty(data)\r\n          ? m('.loader', IsLoading)\r\n          : isPost(data) ? data.map((_post, idx) =>\r\n            m(Post, {\r\n              key: idx,\r\n              post: _post,\r\n              model, showItem,\r\n            })\r\n          ) : isComment(data) ? [\r\n            m('h1.title', data.title),\r\n            data.comments.map((c, idx) =>\r\n              m(Comment, {\r\n                key: idx,\r\n                comment: c,\r\n                model,\r\n              })\r\n            )] : '' ,\r\n        model.state.showUser && model.state.user.id ? m(Modal, { ...userModalInfo(model), model }) : '',\r\n        ]\r\n      )\r\n    },\r\n  }}\r\n\r\n\r\nconst toRoute = model => ({\r\n  onmatch: (_, path) =>\r\n    init(model)(path),\r\n  render: () =>\r\n    m(\r\n      Layout,\r\n      {\r\n        model,\r\n      },\r\n      m(Component, {\r\n        model,\r\n      })\r\n    ),\r\n})\r\n\r\nexport const App = model =>\r\n  model.routes.reduce(makeRoutes(model)(toRoute),{})\r\n","export const isEmpty = data => data.length == 0\r\n\r\nexport const infiniteScroll = model => e => {\r\n  let route = model.state.route\r\n  let length = model.data[route].data.length\r\n  let setpoint = 10 * length * model.state.scrollPos\r\n  if (e.target.scrollTop - model.state.scrollPos >= setpoint) {\r\n    model.state.scrollPos++ + e.target.scrollTop\r\n    if (length < model.data[route].limit) {\r\n      model.getData(model)(route)\r\n    }\r\n  }\r\n}\r\n\r\nexport const init = model => path => {\r\n  model.state.page = 1\r\n  let id =  path.split('/')[2]\r\n  let route = path.split('/')[1]\r\n  console.log('route, id', route, id, model)\r\n  return id ? model.getDataById(model)(route)(id) : model.getData(model)(path)\r\n}\r\n\r\nexport const makeRoutes = model => toRoute => (routes, route) => {\r\n  routes[`/${route}`] = toRoute(model)\r\n  return routes\r\n}\r\n","import m from 'mithril'\r\nconst root = document.body\r\nimport { model } from './Model.js'\r\n\r\nimport { App } from './App.js'\r\n\r\n\r\nif (module.hot) {\r\n  module.hot.accept()\r\n}\r\n\r\nif (process.env.NODE_ENV !== 'production') {\r\n  console.log('Looks like we are in development mode!')\r\n}\r\n\r\n// Styles\r\nimport './index.css'\r\nimport './utils/animations.css'\r\nimport './utils/loader.css'\r\n\r\nfunction getProfile(w) {\r\n  if (w < 668) return 'phone'\r\n  if (w < 920) return 'tablet'\r\n  return 'desktop'\r\n}\r\n\r\nlet winW = window.innerWidth\r\nmodel.state.profile = getProfile(winW)\r\n\r\nfunction checkWidth() {\r\n  const w = window.innerWidth\r\n  if (winW !== w) {\r\n    winW = w\r\n    var lastProfile = model.state.profile\r\n    model.state.profile = getProfile(w)\r\n    if (lastProfile != model.state.profile) m.redraw()\r\n  }\r\n  requestAnimationFrame(checkWidth)\r\n}\r\n\r\nif ('serviceWorker' in navigator) {\r\n  window.addEventListener('load', () => {\r\n    navigator.serviceWorker.register('./service-worker.js').then(registration => {\r\n      console.log('🧟 SW registered: ', registration)\r\n    }).catch(registrationError => {\r\n      console.log('⚙️ SW registration failed: ', registrationError)\r\n    })\r\n  })\r\n}\r\n\r\n\r\ncheckWidth()\r\n\r\nm.route(root, '/news', App(model))\r\n"],"sourceRoot":""}