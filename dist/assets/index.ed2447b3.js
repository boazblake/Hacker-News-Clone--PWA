var M=Object.defineProperty,z=Object.defineProperties;var B=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var w=(t,e,o)=>e in t?M(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,g=(t,e)=>{for(var o in e||(e={}))L.call(e,o)&&w(t,o,e[o]);if(f)for(var o of f(e))P.call(e,o)&&w(t,o,e[o]);return t},p=(t,e)=>z(t,B(e));import{m as s,w as U}from"./vendor.2dad5189.js";const q=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))a(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerpolicy&&(r.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?r.credentials="include":n.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(n){if(n.ep)return;n.ep=!0;const r=o(n);fetch(n.href,r)}};q();const m=["news","newest","ask","show","jobs","item/:key","user/:key"],I=t=>e=>`https://api.hnpwa.com/v0/${t.split("/")[0]}/${e}.json`,S=m.reduce((t,e)=>(t[e]=I(e),t),{}),W=t=>e=>o=>s.request({url:e,method:"GET"}).then(a=>(t.data[o].data=a,t)),D={urls:S,http:W},T=t=>e=>{t.state.showComment=!1,t.state.comment={},t.state.route=e;let o=t.getPath(e);t.data[e]?t.data[e]:t.data[e]={data:[]},t.reqs.http(t)(t.reqs.urls[o](t.state.page))(e)},j=t=>e=>o=>{t.state.prev=t.state.route,e=="item"&&(t.state.route=e),t.data[e]?t.data[e]:t.data[e]={data:[]},t.reqs.http(t)(t.reqs.urls[`${e}/:key`](o))(e)},A=t=>t.split("/")[1],F={key:"",url:"",route:"",page:1,profile:"",tabsShowing:!1,title:"",comment:{},showModal:!1,showUser:!1,user:{id:""}},O=({model:t,key:e,level:o})=>t.state.comment[`${e}-${o}`]?t.state.comment[`${e}-${o}`]=!t.state.comment[`${e}-${o}`]:t.state.comment[`${e}-${o}`]=!0,E=t=>t.state.showModal=!t.state.showModal,N=t=>e=>{t.state.user.id=e,t.state.showUser=!t.state.showUser},u={getData:T,getDataById:j,routes:m,getPath:A,reqs:D,data:{},state:F,toggleComments:O,toggleModal:E,toggleUser:N},R={view:({attrs:{title:t,model:e,close:o}})=>s(".modal-header",[s("h4.title",t),s("button.closeBtn",{onclick:()=>o(e)},"X")])},H={view:({children:t})=>s(".modal-contents",t)},_={view:({children:t})=>s(".modal-footer",t)},v={oninit:({attrs:{init:t,model:e}})=>t(e),view:({attrs:{title:t,contents:e,footer:o,model:a,close:n}})=>s("section.modalContainer",s(".modal",{},[s(R,{title:t,model:a,close:n}),s(H,e),s(_,o)]))},G=s("path",{d:`M31.716,13.5C31.699,6.47,25.974,0.755,18.94,0.755c-7.045,0-12.777,5.732-12.777,12.777
			c0,0.022,0.004,0.043,0.004,0.065C2.477,15.84,0,19.887,0,24.511c0,7.046,5.731,12.777,12.777,12.777
			c2.268,0,4.395-0.601,6.244-1.642c1.849,1.041,3.977,1.642,6.245,1.642c7.046,0,12.777-5.732,12.777-12.777
			C38.043,19.82,35.495,15.722,31.716,13.5z M19.021,32.961c-2.312-1.713-3.906-4.341-4.22-7.352c1.3,0.448,2.689,0.702,4.139,0.702
			c1.514,0,2.96-0.278,4.307-0.764C22.949,28.584,21.349,31.236,19.021,32.961z M8.517,14.898c1.303-0.579,2.743-0.909,4.26-0.909
			c1.475,0,2.879,0.307,4.154,0.858c-2.114,1.826-3.629,4.325-4.195,7.167C10.473,20.352,8.898,17.814,8.517,14.898z M18.94,24.055
			c-1.457,0-2.846-0.298-4.109-0.837c0.361-2.928,1.929-5.482,4.19-7.157c2.243,1.662,3.802,4.187,4.18,7.085
			C21.897,23.727,20.457,24.055,18.94,24.055z M21.111,14.846c1.275-0.55,2.679-0.858,4.154-0.858c1.457,0,2.846,0.298,4.11,0.837
			c-0.356,2.885-1.883,5.404-4.089,7.082C24.704,19.108,23.199,16.65,21.111,14.846z M18.94,3.01c5.432,0,9.915,4.137,10.466,9.425
			c-1.3-0.447-2.689-0.702-4.14-0.702c-2.268,0-4.396,0.601-6.245,1.642c-1.848-1.041-3.975-1.642-6.244-1.642
			c-1.514,0-2.96,0.278-4.307,0.763C8.993,7.179,13.488,3.01,18.94,3.01z M12.777,35.034c-5.803,0-10.523-4.72-10.523-10.523
			c0-3.418,1.645-6.451,4.177-8.375c0.744,3.581,2.999,6.607,6.059,8.408c0.011,3.847,1.735,7.293,4.442,9.631
			C15.656,34.727,14.253,35.034,12.777,35.034z M25.266,35.034c-1.475,0-2.879-0.307-4.154-0.858
			c2.715-2.345,4.444-5.804,4.444-9.664c0-0.022-0.004-0.044-0.004-0.065c3.007-1.829,5.209-4.852,5.918-8.416
			c2.613,1.917,4.319,4.999,4.319,8.48C35.788,30.313,31.068,35.034,25.266,35.034z`,style:{fill:"white"}}),J={init:()=>{},close:t=>t.toggleModal(t),title:"About",contents:[s("p","built with ",s("a",{rel:"noopener",target:"_blank",href:"https://mithril.js.org"}," Mithril.JS")," and webpack"),s("p","source code: ",s("a",{rel:"noopener",target:"_blank",href:"https://github.com/boazblake/mithril-hn-pwa"},"can be found here"))],footer:[s("p",["made by ",s("a",{rel:"noopener",target:"_blank",href:"https://linkedin.com/in/boazblake/"},"B Blake")])]},K=({attrs:{key:t}})=>({view:({attrs:{tab:e,isActive:o}})=>s(s.route.Link,{class:`tab${o?" underline":""}`,key:t,id:`${e}`,href:`/${e}`},e)}),X=({attrs:{model:t}})=>{let e=Object.keys(t.reqs.urls),o=U(["item/:key","user/:key"],e);return{view:({attrs:{model:a}})=>s(".header",{id:"header"},[s("svg.brand",{onclick:()=>a.toggleModal(a)},G),o.map((n,r)=>s(K,{key:r,isActive:a.state.route==`/${n}`,tab:n})),a.state.showModal?s(v,p(g({},J),{model:a})):""])}},x={view:()=>s("footer.footer",{id:"footer"},"content served from https://api.hnpwa.com/")},Q={view:({attrs:{children:t}})=>s("section.content",{id:"content"},t)},V=({attrs:{model:t}})=>({view:({children:e})=>s("section.layout",{id:"layout"},e?[s(X,{model:t}),s(Q,{model:t,children:e}),s(x,{model:t})]:[])}),Y=t=>t.length==0,Z=t=>e=>{let o=t.state.route,a=t.data[o].data.length,n=10*a*t.state.scrollPos;e.target.scrollTop-t.state.scrollPos>=n&&(t.state.scrollPos+++e.target.scrollTop,a<t.data[o].limit&&t.getData(t)(o))},tt=t=>e=>{t.state.page=1;let o=e.split("/")[2],a=e.split("/")[1];return o?t.getDataById(t)(a)(o):t.getData(t)(e)},et=s(".holder",[s(".preloader",[s("div"),s("div"),s("div"),s("div"),s("div"),s("div"),s("div")])]),st="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-5v5h-2v-5h-5v-2h5v-5h2v5h5v2z",ot="M12 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10zm0-2c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6 13h-12v-2h12v2z",nt=(t=!1)=>t?s("path.highlight",{d:ot}):s("path.highlight",{d:st}),at=t=>({init:e=>e.getDataById(e)("user")(e.state.user.id),close:e=>e.toggleUser(e)(""),title:"User",contents:t.data.user&&t.data.user.data?[s("code.row",[s(".bold","id: "),t.data.user.data.id]),s("code.row",[s(".bold","created: "),t.data.user.data.created]),s("code.row",[s(".bold","about: "),t.data.user.data.about]),s("code.row",[s(".bold","karma: "),t.data.user.data.karma])]:[],footer:[]}),rt=t=>e=>(o,a)=>t?s(s.route.Link,{class:"bottom",href:`/item/${o}`,onclick:()=>e(o,a)},`${t} comments`):`${t} comments`,it={view:({attrs:{model:t,showItem:e,post:{comments_count:o,domain:a,id:n,points:r,time_ago:i,title:c,url:h,user:l}}})=>s(".postContainer",{id:`${n}`},[s(".top",[s("h1.title",c),s("code.subTitle"," from ",s("a.",{target:"_blank",href:h,rel:"noopener"},`${a}`))]),s(".bottom",[s(".left",[s(".top.highlight.cursor",{onclick:()=>{t.toggleUser(t)(l)}},` by ${l}`),s("code.bottom",`${i}`)]),s(".right",[s("code.highlight.top",`${r} points`),rt(o)(e)(n,c)])])])},b={view:({attrs:{key:t,model:e,comment:{comments:o,comments_count:a,id:n,time_ago:r,content:i,level:c,user:h}}})=>{let l={showComments:e.state.comment[`${t}-${c}`]||!1};return s(".commentContainer",{id:`${n}`},[s(".",[s("a.highlight.cursor",{onclick:()=>{e.toggleUser(e)(h),console.log(h)}},` ${h}`),s("code",` ${r}`)]),s(".nudgeRight",[s("code",s.trust(i)),a?s("button.commentBtn",{onclick:()=>e.toggleComments({model:e,key:t,level:c})},[s("svg.toggleCommentSvg",nt(l.showComments)),`${a} comments`]):"",l.showComments?o.map((y,C)=>s(b,{key:C,comment:y,model:e})):""])])}},ct=()=>{const t=o=>o.map,e=o=>o.comments&&o.comments.map;return{view:({attrs:{model:o}})=>{let a=o.state.route,n=o.data[a].data,r=(i,c="")=>{o.state.title=c,o.state.id=i,o.state.showComment=!o.state.showComment};return s("section.component",{id:"component",route:o.state.route,onscroll:Z(o)},[Y(n)?s(".loader",et):t(n)?n.map((i,c)=>s(it,{key:c,post:i,model:o,showItem:r})):e(n)?[s(".titleContainer",[s("button.backBtn",{onclick:()=>s.route.set(o.state.prev||"/news")},"Back"),s("h1.title",n.title)]),n.comments.map((i,c)=>s(b,{key:c,comment:i,model:o}))]:"",o.state.showUser&&o.state.user.id?s(v,p(g({},at(o)),{model:o})):""])}}},ht=t=>({onmatch:(e,o)=>tt(t)(o),render:()=>s(V,{model:t},s(ct,{model:t}))}),lt=t=>e=>(o,a)=>(o[`/${a}`]=e(t),o),ut=t=>t.routes.reduce(lt(t)(ht),{});const gt=document.body;window.log=t=>e=>(console.log(t,e),e);function k(t){return t<668?"phone":t<920?"tablet":"desktop"}let d=window.innerWidth;u.state.profile=k(d);function $(){const t=window.innerWidth;if(d!==t){d=t;var e=u.state.profile;u.state.profile=k(t),e!=u.state.profile&&s.redraw()}requestAnimationFrame($)}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("./service-worker.js").then(t=>{console.log("\u{1F9DF} SW registered: ",t)}).catch(t=>{console.log("\u2699\uFE0F SW registration failed: ",t)})});$();s.route(gt,"/news",ut(u));
